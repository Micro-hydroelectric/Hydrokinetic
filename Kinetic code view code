classdef Kinetic_app < matlab.apps.AppBase

    % Properties that correspond to app components
    properties (Access = public)
        UIFigure                     matlab.ui.Figure
        AveragePowerOutputEditField  matlab.ui.control.NumericEditField
        AveragePowerOutputEditFieldLabel  matlab.ui.control.Label
        CalculateAveragePowerOutputButton  matlab.ui.control.Button
        AverageFlowEditField         matlab.ui.control.NumericEditField
        AverageFlowEditFieldLabel    matlab.ui.control.Label
        Q70EditField                 matlab.ui.control.NumericEditField
        Q70EditFieldLabel            matlab.ui.control.Label
        Q10EditField                 matlab.ui.control.NumericEditField
        Q10EditFieldLabel            matlab.ui.control.Label
        SweptareaofturbineEditField  matlab.ui.control.NumericEditField
        SweptareaofturbineEditFieldLabel  matlab.ui.control.Label
        CrosssectionalareaEditField  matlab.ui.control.NumericEditField
        CrosssectionalareaEditFieldLabel  matlab.ui.control.Label
        EfficiencyEditField          matlab.ui.control.NumericEditField
        EfficiencyEditFieldLabel     matlab.ui.control.Label
        CalculateGraphButton         matlab.ui.control.Button
        UIAxes                       matlab.ui.control.UIAxes
    end

    % Callbacks that handle component events
    methods (Access = private)

        % Button pushed function: CalculateGraphButton
        function CalculateGraphButtonPushed(app, event)
            Q10 = app.Q10EditField.Value;
            Q70 = app.Q70EditField.Value;
            nElements = 20;
            stepSize = (Q70-Q10)/(nElements-1);
            Flow = Q10:stepSize:Q70;
            Rho = 1000;
            Cp = app.EfficiencyEditField.Value;
            A = app.CrosssectionalareaEditField.Value;
            XS = app.CrosssectionalareaEditField.Value; % Cross section of entire river (currently ballpark)
            KineticQ = Flow/XS;
            
            PKinetic = Cp*0.5*Rho*A*KineticQ.^3/1000;
            y = PKinetic;
            plot(app.UIAxes,y);
        end

        % Button pushed function: CalculateAveragePowerOutputButton
        function CalculateAveragePowerOutputButtonPushed(app, event)
            AverageFlow = app.AverageFlowEditField.Value;
            Rho = 1000;
            Cp = app.EfficiencyEditField.Value;
            A = app.CrosssectionalareaEditField.Value;
            AveragePower = Cp*0.5*Rho*A*AverageFlow;
            
            app.AveragePowerOutputEditField.Value = AveragePower;
        end
    end

    % Component initialization
    methods (Access = private)

        % Create UIFigure and components
        function createComponents(app)

            % Create UIFigure and hide until all components are created
app.UIFigure = uifigure('Visible', 'off');
app.UIFigure.Position = [100 100 640 480];
app.UIFigure.Name = 'MATLAB App';

% Create UIAxes
app.UIAxes = uiaxes(app.UIFigure);
title(app.UIAxes, 'Flow against kinetic power generation')
xlabel(app.UIAxes, 'Flow')
ylabel(app.UIAxes, 'Kinetic Power Generated')
zlabel(app.UIAxes, 'Z')
app.UIAxes.FontName = 'Times New Roman';
app.UIAxes.XGrid = 'on';
app.UIAxes.YGrid = 'on';
app.UIAxes.FontSize = 16;
app.UIAxes.Position = [242 38 387 416];

% Create CalculateGraphButton
app.CalculateGraphButton = uibutton(app.UIFigure, 'push');
app.CalculateGraphButton.ButtonPushedFcn = createCallbackFcn(app, @CalculateGraphButtonPushed, true);
app.CalculateGraphButton.FontName = 'Times New Roman';
app.CalculateGraphButton.FontSize = 16;
app.CalculateGraphButton.Position = [62 240 120 27];
app.CalculateGraphButton.Text = 'Calculate Graph';

% Create EfficiencyEditFieldLabel
app.EfficiencyEditFieldLabel = uilabel(app.UIFigure);
app.EfficiencyEditFieldLabel.HorizontalAlignment = 'right';
app.EfficiencyEditFieldLabel.FontName = 'Times New Roman';
app.EfficiencyEditFieldLabel.FontSize = 16;
app.EfficiencyEditFieldLabel.Position = [11 416 72 22];
app.EfficiencyEditFieldLabel.Text = 'Efficiency';

% Create EfficiencyEditField
app.EfficiencyEditField = uieditfield(app.UIFigure, 'numeric');
app.EfficiencyEditField.FontName = 'Times New Roman';
app.EfficiencyEditField.FontSize = 16;
app.EfficiencyEditField.Position = [174 416 47 22];

% Create CrosssectionalareaEditFieldLabel
app.CrosssectionalareaEditFieldLabel = uilabel(app.UIFigure);
app.CrosssectionalareaEditFieldLabel.HorizontalAlignment = 'right';
app.CrosssectionalareaEditFieldLabel.FontName = 'Times New Roman';
app.CrosssectionalareaEditFieldLabel.FontSize = 16;
app.CrosssectionalareaEditFieldLabel.Position = [11 384 133 22];
app.CrosssectionalareaEditFieldLabel.Text = 'Cross sectional area';

% Create CrosssectionalareaEditField
app.CrosssectionalareaEditField = uieditfield(app.UIFigure, 'numeric');
app.CrosssectionalareaEditField.FontName = 'Times New Roman';
app.CrosssectionalareaEditField.FontSize = 16;
app.CrosssectionalareaEditField.Position = [174 384 47 22];

% Create SweptareaofturbineEditFieldLabel
app.SweptareaofturbineEditFieldLabel = uilabel(app.UIFigure);
app.SweptareaofturbineEditFieldLabel.HorizontalAlignment = 'right';
app.SweptareaofturbineEditFieldLabel.FontName = 'Times New Roman';
app.SweptareaofturbineEditFieldLabel.FontSize = 16;
app.SweptareaofturbineEditFieldLabel.Position = [11 354 143 22];
app.SweptareaofturbineEditFieldLabel.Text = 'Swept area of turbine';

% Create SweptareaofturbineEditField
app.SweptareaofturbineEditField = uieditfield(app.UIFigure, 'numeric');
app.SweptareaofturbineEditField.FontName = 'Times New Roman';
app.SweptareaofturbineEditField.FontSize = 16;
app.SweptareaofturbineEditField.Position = [174 354 47 22];

% Create Q10EditFieldLabel
app.Q10EditFieldLabel = uilabel(app.UIFigure);
app.Q10EditFieldLabel.HorizontalAlignment = 'right';
app.Q10EditFieldLabel.FontName = 'Times New Roman';
app.Q10EditFieldLabel.FontSize = 16;
app.Q10EditFieldLabel.Position = [11 318 33 22];
app.Q10EditFieldLabel.Text = 'Q10';

% Create Q10EditField
app.Q10EditField = uieditfield(app.UIFigure, 'numeric');
app.Q10EditField.FontName = 'Times New Roman';
app.Q10EditField.FontSize = 16;
app.Q10EditField.Position = [174 318 47 22];

% Create Q70EditFieldLabel
app.Q70EditFieldLabel = uilabel(app.UIFigure);
app.Q70EditFieldLabel.HorizontalAlignment = 'right';
app.Q70EditFieldLabel.FontName = 'Times New Roman';
app.Q70EditFieldLabel.FontSize = 16;
app.Q70EditFieldLabel.Position = [11 285 33 22];
app.Q70EditFieldLabel.Text = 'Q70';

% Create Q70EditField
app.Q70EditField = uieditfield(app.UIFigure, 'numeric');
app.Q70EditField.FontName = 'Times New Roman';
app.Q70EditField.FontSize = 16;
app.Q70EditField.Position = [174 285 47 22];

% Create AverageFlowEditFieldLabel
app.AverageFlowEditFieldLabel = uilabel(app.UIFigure);
app.AverageFlowEditFieldLabel.HorizontalAlignment = 'right';
app.AverageFlowEditFieldLabel.FontName = 'Times New Roman';
app.AverageFlowEditFieldLabel.FontSize = 16;
app.AverageFlowEditFieldLabel.Position = [11 197 95 22];
app.AverageFlowEditFieldLabel.Text = 'Average Flow';

% Create AverageFlowEditField
app.AverageFlowEditField = uieditfield(app.UIFigure, 'numeric');
app.AverageFlowEditField.FontName = 'Times New Roman';
app.AverageFlowEditField.FontSize = 16;
app.AverageFlowEditField.Position = [174 197 47 22];

% Create CalculateAveragePowerOutputButton
app.CalculateAveragePowerOutputButton = uibutton(app.UIFigure, 'push');
app.CalculateAveragePowerOutputButton.ButtonPushedFcn = createCallbackFcn(app, @CalculateAveragePowerOutputButtonPushed, true);
app.CalculateAveragePowerOutputButton.FontName = 'Times New Roman';
app.CalculateAveragePowerOutputButton.FontSize = 16;
app.CalculateAveragePowerOutputButton.Position = [8 140 227 27];
app.CalculateAveragePowerOutputButton.Text = 'Calculate Average Power Output';

% Create AveragePowerOutputEditFieldLabel
app.AveragePowerOutputEditFieldLabel = uilabel(app.UIFigure);
app.AveragePowerOutputEditFieldLabel.HorizontalAlignment = 'right';
app.AveragePowerOutputEditFieldLabel.FontName = 'Times New Roman';
app.AveragePowerOutputEditFieldLabel.FontSize = 16;
app.AveragePowerOutputEditFieldLabel.Position = [11 98 152 22];
app.AveragePowerOutputEditFieldLabel.Text = 'Average Power Output';

% Create AveragePowerOutputEditField
app.AveragePowerOutputEditField = uieditfield(app.UIFigure, 'numeric');
app.AveragePowerOutputEditField.FontName = 'Times New Roman';
app.AveragePowerOutputEditField.FontSize = 16;
app.AveragePowerOutputEditField.Position = [174 98 47 22];

% Show the figure after all components are created
app.UIFigure.Visible = 'on';
end
end

% App creation and deletion
methods (Access = public)

% Construct app
function app = Kinetic_app

% Create UIFigure and components
createComponents(app)

% Register the app with App Designer
registerApp(app, app.UIFigure)

if nargout == 0
clear app
end
end

% Code that executes before app deletion
function delete(app)

% Delete UIFigure when app is deleted
delete(app.UIFigure)
end
end
end
